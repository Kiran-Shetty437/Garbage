<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Dashboard</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>

<body>
    <div class="dashboard-container user-theme">
        <header class="top-nav">
            <div class="logo">User Portal</div>
            <div class="user-menu">
                <span>Hello, {{ username }}</span>
                <a href="{{ url_for('logout') }}" class="btn-logout">Logout</a>
            </div>
        </header>

        <main class="content">
            <div class="welcome-box">
                <h1>Welcome, {{ username }}!</h1>
                <p>Explore recommended companies and opportunities tailored for you.</p>
            </div>

            <div class="company-grid" style="margin-top: 2.5rem;">
                <h2 style="margin-bottom: 1.5rem; display: flex; align-items: center; gap: 0.5rem;">
                    üè¢ Explore Companies
                </h2>

                {% if companies %}
                <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 1.5rem;">
                    {% for company in companies %}
                    <div class="company-card" style="
                        background: white; 
                        border-radius: 1.25rem; 
                        overflow: hidden; 
                        box-shadow: 0 4px 20px rgba(0,0,0,0.08); 
                        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
                        border: 1px solid rgba(0,0,0,0.05);
                        position: relative;
                        display: flex;
                        flex-direction: column;
                    ">
                        <div class="company-image-container"
                            style="height: 160px; overflow: hidden; position: relative; background: #f8fafc;">
                            {% if company['image_filename'] %}
                            <img src="{{ url_for('static', filename='uploads/' + company['image_filename']) }}"
                                alt="{{ company['company_name'] }}"
                                style="width: 100%; height: 100%; object-fit: cover;">
                            {% else %}
                            <div
                                style="width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; background: linear-gradient(135deg, #e2e8f0 0%, #cbd5e1 100%); color: #64748b;">
                                <span style="font-size: 3rem;">üè¢</span>
                            </div>
                            {% endif %}
                            <div
                                style="position: absolute; bottom: 0; left: 0; right: 0; height: 50%; background: linear-gradient(to top, rgba(0,0,0,0.05), transparent);">
                            </div>
                        </div>

                        <div
                            style="padding: 1.5rem; flex-grow: 1; display: flex; flex-direction: column; justify-content: space-between;">
                            <div>
                                <h3 style="margin: 0 0 0.5rem 0; font-size: 1.25rem; color: #1e293b;">{{
                                    company['company_name'] }}</h3>

                                <div class="job-scraped-info" style="
                                    background: #f8fafc; 
                                    padding: 1rem; 
                                    border-radius: 0.75rem; 
                                    margin-bottom: 1.25rem;
                                    font-size: 0.85rem;
                                    border: 1px solid #e2e8f0;
                                    box-shadow: inset 0 2px 4px rgba(0,0,0,0.02);
                                ">
                                    <div style="margin-bottom: 0.5rem; display: flex; align-items: start; gap: 0.5rem;">
                                        <span style="font-size: 1.1rem;">üéØ</span>
                                        <div>
                                            <div
                                                style="color: #64748b; font-size: 0.75rem; text-transform: uppercase; font-weight: 700; letter-spacing: 0.05em;">
                                                Role</div>
                                            <div style="color: #1e293b; font-weight: 600;">{{ company['job_role'] or
                                                'Open Position' }}</div>
                                        </div>
                                    </div>
                                    <div style="display: flex; align-items: start; gap: 0.5rem;">
                                        <span style="font-size: 1.1rem;">üìÖ</span>
                                        <div>
                                            <div
                                                style="color: #64748b; font-size: 0.75rem; text-transform: uppercase; font-weight: 700; letter-spacing: 0.05em;">
                                                Application Window</div>
                                            <div style="color: #1e293b; font-weight: 600;">{{ company['start_date'] }} ‚Äî
                                                {{ company['end_date'] }}</div>
                                        </div>
                                    </div>
                                </div>
                                <p style="font-size: 0.9rem; color: #64748b; margin-bottom: 1.5rem;">Explore this
                                    opportunity at {{ company['company_name'] }}. Visit their official page to apply.
                                </p>
                            </div>

                            <a href="{{ company['official_page_link'] }}" target="_blank" style="
                                display: block; 
                                width: 100%; 
                                text-align: center; 
                                padding: 0.8rem; 
                                background: #10b981; 
                                color: white; 
                                text-decoration: none; 
                                border-radius: 0.75rem; 
                                font-weight: 600;
                                transition: background 0.2s;
                                box-shadow: 0 4px 12px rgba(16, 185, 129, 0.2);
                            " onmouseover="this.style.background='#059669'"
                                onmouseout="this.style.background='#10b981'">
                                Visit Website
                            </a>
                        </div>
                    </div>
                    {% endfor %}
                </div>
                {% else %}
                <div
                    style="background: white; padding: 3rem; border-radius: 1rem; text-align: center; box-shadow: 0 4px 6px rgba(0,0,0,0.05);">
                    <p style="font-size: 1.1rem; color: #64748b;">No companies available at the moment. Check back soon!
                    </p>
                </div>
                {% endif %}
            </div>

            <div class="grid-container">
                <div class="card interactive">
                    <h3>My Profile</h3>
                    <p>Edit your personal details and avatar.</p>
                    <button class="btn-secondary">Edit Profile</button>
                </div>

                <div class="card interactive">
                    <h3>Messages</h3>
                    <p>Check your latest notifications and messages.</p>
                    <button class="btn-secondary">View Messages</button>
                </div>

                <div class="card interactive">
                    <h3>Settings</h3>
                    <p>Manage your account preferences.</p>
                    <button class="btn-secondary">Manage</button>
                </div>
            </div>
        </main>
    </div>
</body>

</html>